[
["e5be9ee697a2e69c89e8ae8ae695b8e794a2e7949fe696b0e8ae8ae695b8.html", "從既有變數產生新變數", " 從既有變數產生新變數 和summary functions不同的是，vectorized function，得到的還是一個vector(column vector) mutate從既有變數中新增變數，有保留原始data.frame。 flights %&gt;% mutate(total_delay = dep_delay + arr_delay) ## # A tibble: 336,776 x 20 ## year month day dep_time sched_dep_time dep_delay arr_time ## &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;int&gt; ## 1 2013 1 1 517 515 2.00 830 ## 2 2013 1 1 533 529 4.00 850 ## 3 2013 1 1 542 540 2.00 923 ## 4 2013 1 1 544 545 -1.00 1004 ## 5 2013 1 1 554 600 -6.00 812 ## 6 2013 1 1 554 558 -4.00 740 ## 7 2013 1 1 555 600 -5.00 913 ## 8 2013 1 1 557 600 -3.00 709 ## 9 2013 1 1 557 600 -3.00 838 ## 10 2013 1 1 558 600 -2.00 753 ## # ... with 336,766 more rows, and 13 more variables: sched_arr_time &lt;int&gt;, ## # arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;, ## # origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;, ## # minute &lt;dbl&gt;, time_hour &lt;dttm&gt;, total_delay &lt;dbl&gt; transmute從既有變數中新增變數，無保留原始data.frame。 flights %&gt;% transmute(total_delay = dep_delay + arr_delay) ## # A tibble: 336,776 x 1 ## total_delay ## &lt;dbl&gt; ## 1 13.0 ## 2 24.0 ## 3 35.0 ## 4 -19.0 ## 5 -31.0 ## 6 8.00 ## 7 14.0 ## 8 -17.0 ## 9 -11.0 ## 10 6.00 ## # ... with 336,766 more rows 小練習 休士頓火箭隊，隊伍中本季得分王是誰？ Hint: 每場平均得分＝本季總得分(TotalPoints)/本季出賽場次(GamesPlayed)。 NBA1718 %&gt;% filter(Team == &quot;HOU&quot;) %&gt;% mutate(avg_points = TotalPoints/GamesPlayed) %&gt;% select(1:5, avg_points) ## League Name Team Position GamesPlayed avg_points ## 1 NBA Ryan Anderson HOU PF 66 9.348485 ## 2 NBA Trevor Ariza HOU SF 67 11.671642 ## 3 NBA Tarik Black HOU C 51 3.529412 ## 4 NBA Bobby Brown HOU PG 20 2.500000 ## 5 NBA Markel Brown HOU SG 4 1.250000 ## 6 NBA Clint Capela HOU C 74 13.864865 ## 7 NBA Eric Gordon HOU SG 69 18.014493 ## 8 NBA Gerald Green HOU SF 41 12.121951 ## 9 NBA James Harden HOU SG 72 30.430556 ## 10 NBA Nene Hilario HOU C 52 6.538462 ## 11 NBA R.j. Hunter HOU SG 5 3.800000 ## 12 NBA Aaron Jackson HOU SG 1 8.000000 ## 13 NBA Joe Johnson HOU SF 55 6.763636 ## 14 NBA Luc Mbah_a_moute HOU SF 61 7.540984 ## 15 NBA Chinanu Onuaku HOU PF 1 4.000000 ## 16 NBA Chris Paul HOU PG 58 18.637931 ## 17 NBA Zhou Qi HOU PF 18 1.222222 ## 18 NBA Tim Quarterman HOU SG 3 1.333333 ## 19 NBA Pj Tucker HOU SF 82 6.121951 ## 20 NBA Brandan Wright HOU PF 28 4.964286 在聯盟中，要判斷一位球員是否是頂尖射手，會有三個指標，分別是 罰球命中率(FreeThrows)&gt;90% 三分球(Threes)命中率&gt;40% 一般投籃(FieldGoals)命中率&gt;50% 總共是(90+40+50 &gt;= 180)，又稱為180Club。請找出本季滿足180俱樂部的球員有誰？ Hint: 這邊最一開始額外新增兩個標準，出賽場次&gt;50場，每場至少出手一次。 Hint: 需要模仿上面練習一的方式，創造命中率的新變數，再把三個新變數相加(若沒有轉成百分比，最後是&gt;=1.8)做比較。 Hint: 善用Tab鍵補齊。 NBA1718 %&gt;% filter(GamesPlayed &gt;= 50, ThreesAttempted &gt;= GamesPlayed) %&gt;% mutate(Free_percent = FreeThrowsMade/FreeThrowsAttempted, FieldGoal_percent = FieldGoalsMade/FieldGoalsAttempted, Three_percent = ThreesMade/ThreesAttempted) %&gt;% mutate(shootingstar = Free_percent + FieldGoal_percent + Three_percent) %&gt;% filter(shootingstar &gt;= 1.8) ## League Name Team Position GamesPlayed TotalMinutesPlayed ## 1 NBA Darren Collison IND PG 69 2019 ## 2 NBA Stephen Curry GSW PG 51 1637 ## 3 NBA Kevin Durant GSW SF 68 2327 ## 4 NBA Karl-antho Towns MIN C 82 2920 ## FieldGoalsMade FieldGoalsAttempted ThreesMade ThreesAttempted ## 1 316 638 96 205 ## 2 428 863 212 500 ## 3 630 1221 173 413 ## 4 639 1171 120 285 ## FreeThrowsMade FreeThrowsAttempted OffensiveRebounds TotalRebounds ## 1 127 143 37 177 ## 2 278 302 36 260 ## 3 359 404 32 465 ## 4 345 402 241 1015 ## Assists Steals Turnovers Blocks PersonalFouls Disqualifications ## 1 368 93 86 15 122 0 ## 2 308 81 153 8 114 1 ## 3 366 50 208 119 133 0 ## 4 199 64 160 116 285 3 ## TotalPoints Technicals Ejections FlagrantFouls GamesStarted Free_percent ## 1 855 1 0 0 64 0.8881119 ## 2 1346 2 0 0 51 0.9205298 ## 3 1792 12 0 0 68 0.8886139 ## 4 1743 4 0 0 82 0.8582090 ## FieldGoal_percent Three_percent shootingstar ## 1 0.4952978 0.4682927 1.851702 ## 2 0.4959444 0.4240000 1.840474 ## 3 0.5159705 0.4188862 1.823471 ## 4 0.5456874 0.4210526 1.824949 "]
]
